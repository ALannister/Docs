# 概述

[TOC]

### 1 定义

锁是计算机协调多个进程或线程并发访问某一资源的机制。

在数据库中，除传统的计算资源（如CPU、RAM、I/O等）的争用以外，数据也是一种供许多用户共享的资源。如何保证数据并发访问的一致性、有效性是所有数据库必须解决的一个问题，锁冲突也是影响数据库并发访问性能的一个重要因素。从这个角度来说，锁对数据库而言显得尤其重要，也更加复杂。

### 2 生活购物

打个比方，我们到淘宝上买一件商品，商品只有一件库存，这个时候如果还有另一个人买，

那么如何解决是你买到还是另一个人买到的问题？

![img](assets/65BA895A-D612-4342-94CC-4DA782C20969.png) 

这里肯定要用到事务，我们先从库存表中取出物品数量，然后插入订单，付款后插入付款表信息，

然后更新商品数量。在这个过程中，使用锁可以对有限的资源进行保护，解决隔离和并发的矛盾。 

### 3 锁的分类

#### 3.1 从对数据操作的类型（读\写）分

- 读锁(共享锁)：针对同一份数据，多个读操作可以同时进行而不会互相影响。

- 写锁（排它锁）：当前写操作没有完成前，它会阻断其他写锁和读锁。

#### 3.2 从对数据操作的粒度分

- 表锁

- 行锁
